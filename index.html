<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Birthday Celebration</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body, html {
            font-family: 'Lato', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            -webkit-text-size-adjust: 100%;
        }
.container {
            position: relative;
        }
        .valentines {
            position: relative;
            top: 50px;
            cursor: pointer;
            animation: up 3s linear infinite;
        }
        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            background: #f08080;
            display: grid;
            place-items: center;
        }
        .envelope::before {
            content: '';
            position: absolute;
            width: 212px;
            height: 212px;
            background: #f08080;
            transform: rotate(45deg);
            top: -105px;
            left: 44px;
            border-radius: 30px 0 0 0;
        }
        .front {
            position: absolute;
            border-right: 180px solid #f4978e;
            border-top: 95px solid transparent;
            border-bottom: 100px solid transparent;
            left: 120px;
            top: 5px;
            width: 0;
            height: 0;
            z-index: 10;
        }
        .front::before {
            position: absolute;
            content: '';
            border-left: 300px solid #fda996;
            border-top: 195px solid transparent;
            left: -120px;
            top: -95px;
        }
        .card {
            position: relative;
            width: 250px;
            height: 180px;
            background: #fff;
            border-radius: 2px;
            display: grid;
            place-items: center;
            transition: 1s;
        }
        .card::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px solid #003049;
            border-style: dashed;
        }
        .valentines:hover .card {
            transform: translateY(-100px);
        }
        .card .text {
            font-family: 'Brush Script MT', cursive;
            font-size: 28px;
            text-align: center;
            line-height: 25px;
            color: #003049;
        }
        .card .heart {
            position: relative;
            width: 35px;
            height: 35px;
            background: red;
            bottom: 20px;
            transform: rotate(45deg);
            border-radius: 50% 0 0 50%;
        }
        .card .heart::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: red;
            border-radius: 0 50% 50% 0;
            right: 0;
            transform: rotate(-90deg);
            transform-origin: top;
        }
        .card .heart::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: red;
            right: -18px;
        }
        @keyframes up {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-30px);
            }
        }
        .valentines::before {
            content: '';
            position: absolute;
            width: 330px;
            height: 25px;
            border-radius: 50%;
            background: rgba(0, 0, 0, .3);
            top: 265px;
            left: -15px;
            animation: scale 3s linear infinite;
        }
        @keyframes scale {
            0%, 100% {
                transform: scaleX(1);
            }
            50% {
                transform: scaleX(.85);
            }
        }

        /* Adjust for iPhone 14 Pro */
        @media (max-width: 390px) {
            .envelope {
                width: 240px;
                height: 160px;
            }
            .envelope::before {
                width: 170px;
                height: 170px;
                top: -84px;
                left: 35px;
            }
            .front {
                border-right: 144px solid #f4978e;
                border-top: 76px solid transparent;
                border-bottom: 80px solid transparent;
                left: 96px;
                top: 4px;
            }
            .front::before {
                border-left: 240px solid #fda996;
                border-top: 156px solid transparent;
                left: -96px;
                top: -76px;
            }
            .card {
                width: 200px;
                height: 144px;
            }
            .card .text {
                font-size: 22px;
                line-height: 20px;
            }
            .card .heart {
                width: 28px;
                height: 28px;
                bottom: 16px;
            }
            .valentines::before {
                width: 264px;
                height: 20px;
                top: 212px;
                left: -12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Happy Birthday<br>My Baby Girl ❤️</h1>
            <p class="subtitle">Your first birthday with me, and many more to come...</p>
        </header>
        <div class="content">
            <div class="photo-gallery" id="photoGallery"></div>
            <div class="music-player">
                <div class="song-info">
                    <div class="song-title" id="songTitle"></div>
                    <div class="artist" id="artistName"></div>
                </div>
                <div class="player-controls">
                    <button class="btn btn-prev" id="prevBtn"></button>
                    <button class="btn btn-play" id="playBtn"></button>
                    <button class="btn btn-pause" id="pauseBtn"></button>
                    <button class="btn btn-next" id="nextBtn"></button>
                </div>
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="time-info">
                    <span id="currentTime">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>
            <div class="valentines">
                <div class="envelope">
                    <div class="card">
                        <div class="text">
                            Happy<br>
                            Birthday<br>
                            My Dear
                        </div>
                        <div class="heart"></div>
                    </div>
                </div>
                <div class="front"></div>
            </div>
        </div>

    <!-- Floating Hearts -->
    <!-- Line 1 -->
    <div class="heart" style="left: 5%; animation-delay: 0s;"></div>
    <div class="heart" style="left: 5%; animation-delay: 1s;"></div>
    <div class="heart" style="left: 5%; animation-delay: 2s;"></div>
    <div class="heart" style="left: 5%; animation-delay: 3s;"></div>
    <div class="heart" style="left: 5%; animation-delay: 4s;"></div>

    <!-- Line 2 -->
    <div class="heart" style="left: 15%; animation-delay: 0.5s;"></div>
    <div class="heart" style="left: 15%; animation-delay: 1.5s;"></div>
    <div class="heart" style="left: 15%; animation-delay: 2.5s;"></div>
    <div class="heart" style="left: 15%; animation-delay: 3.5s;"></div>
    <div class="heart" style="left: 15%; animation-delay: 4.5s;"></div>

    <!-- Line 3 -->
    <div class="heart" style="left: 25%; animation-delay: 1s;"></div>
    <div class="heart" style="left: 25%; animation-delay: 2s;"></div>
    <div class="heart" style="left: 25%; animation-delay: 3s;"></div>
    <div class="heart" style="left: 25%; animation-delay: 4s;"></div>
    <div class="heart" style="left: 25%; animation-delay: 5s;"></div>

    <!-- Line 4 -->
    <div class="heart" style="left: 35%; animation-delay: 1.5s;"></div>
    <div class="heart" style="left: 35%; animation-delay: 2.5s;"></div>
    <div class="heart" style="left: 35%; animation-delay: 3.5s;"></div>
    <div class="heart" style="left: 35%; animation-delay: 4.5s;"></div>
    <div class="heart" style="left: 35%; animation-delay: 5.5s;"></div>

    <!-- Line 5 -->
    <div class="heart" style="left: 45%; animation-delay: 2s;"></div>
    <div class="heart" style="left: 45%; animation-delay: 3s;"></div>
    <div class="heart" style="left: 45%; animation-delay: 4s;"></div>
    <div class="heart" style="left: 45%; animation-delay: 5s;"></div>
    <div class="heart" style="left: 45%; animation-delay: 6s;"></div>

    <!-- Line 6 -->
    <div class="heart" style="left: 55%; animation-delay: 2.5s;"></div>
    <div class="heart" style="left: 55%; animation-delay: 3.5s;"></div>
    <div class="heart" style="left: 55%; animation-delay: 4.5s;"></div>
    <div class="heart" style="left: 55%; animation-delay: 5.5s;"></div>
    <div class="heart" style="left: 55%; animation-delay: 6.5s;"></div>

    <!-- Line 7 -->
    <div class="heart" style="left: 65%; animation-delay: 3s;"></div>
    <div class="heart" style="left: 65%; animation-delay: 4s;"></div>
    <div class="heart" style="left: 65%; animation-delay: 5s;"></div>
    <div class="heart" style="left: 65%; animation-delay: 6s;"></div>
    <div class="heart" style="left: 65%; animation-delay: 7s;"></div>

    <!-- Line 8 -->
    <div class="heart" style="left: 75%; animation-delay: 3.5s;"></div>
    <div class="heart" style="left: 75%; animation-delay: 4.5s;"></div>
    <div class="heart" style="left: 75%; animation-delay: 5.5s;"></div>
    <div class="heart" style="left: 75%; animation-delay: 6.5s;"></div>
    <div class="heart" style="left: 75%; animation-delay: 7.5s;"></div>

    <!-- Line 9 -->
    <div class="heart" style="left: 85%; animation-delay: 4s;"></div>
    <div class="heart" style="left: 85%; animation-delay: 5s;"></div>
    <div class="heart" style="left: 85%; animation-delay: 6s;"></div>
    <div class="heart" style="left: 85%; animation-delay: 7s;"></div>
    <div class="heart" style="left: 85%; animation-delay: 8s;"></div>

    <!-- Line 10 -->
    <div class="heart" style="left: 95%; animation-delay: 4.5s;"></div>
    <div class="heart" style="left: 95%; animation-delay: 5.5s;"></div>
    <div class="heart" style="left: 95%; animation-delay: 6.5s;"></div>
    <div class="heart" style="left: 95%; animation-delay: 7.5s;"></div>
    <div class="heart" style="left: 95%; animation-delay: 8.5s;"></div>


    <script>
        const playlist = [
        { title: "在这座城市遗失了你", artist: "告五人", file: "在這座城市遺失了你.mp3" },
        { title: "女孩", artist: "韦礼安", file: "女孩.mp3" },
        { title: "慢慢等", artist: "韦礼安", file: "慢慢等.mp3" },
        { title: "地球上最浪漫的一首歌", artist: "黄鸿升", file: "地球上最浪漫的一首歌.mp3" },
        { title: "不是因为天气晴朗才爱你", artist: "理想混蛋", file: "不是因為天氣晴朗才愛你.mp3" }
    ];

        const photos = [
            "IMG_8273.JPEG",
            "image2.JPEG",
            "photo3.jpg"
        ];

        const letters = [
            "My dearest, your love fills my heart with joy every single day...",
            "Remember when we first met? That moment changed my life forever...",
            "Your smile brightens my world. I'm so grateful to have you in my life..."
        ];

        let currentSongIndex = 0;
        let sound;
        let currentPhotoIndex = 0;

        function formatTime(secs) {
            const minutes = Math.floor(secs / 60);
            const seconds = Math.floor(secs % 60);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function updatePlayerInfo() {
            document.getElementById('songTitle').textContent = playlist[currentSongIndex].title;
            document.getElementById('artistName').textContent = playlist[currentSongIndex].artist;
        }

        function updateProgressBar() {
            const progressBar = document.getElementById('progressBar');
            const currentTime = document.getElementById('currentTime');
            const duration = document.getElementById('duration');

            if (sound) {
                const seek = sound.seek() || 0;
                const totalDuration = sound.duration() || 0;
                progressBar.style.width = `${(seek / totalDuration) * 100}%`;
                currentTime.textContent = formatTime(seek);
                duration.textContent = formatTime(totalDuration);
                requestAnimationFrame(updateProgressBar);
            }
        }

        function playSong() {
            if (sound) sound.stop();
            sound = new Howl({
                src: [playlist[currentSongIndex].file],
                html5: true,
                onplay: () => {
                    requestAnimationFrame(updateProgressBar);
                    playBtn.style.display = 'none';
                    pauseBtn.style.display = 'inline-block';
                },
                onload: () => {
                    const duration = document.getElementById('duration');
                    duration.textContent = formatTime(sound.duration());
                },
                onend: nextSong,
                onloaderror: (id, error) => {
                    console.error('Error loading audio:', error);
                    alert(`Error loading audio: ${playlist[currentSongIndex].title}. Please check the file path.`);
                }
            });
            sound.play();
        }

        function pauseSong() {
            if (sound) sound.pause();
            playBtn.style.display = 'inline-block';
            pauseBtn.style.display = 'none';
        }

        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % playlist.length;
            updatePlayerInfo();
            playSong();
        }

        function prevSong() {
            currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
            updatePlayerInfo();
            playSong();
        }

        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');

        playBtn.addEventListener('click', playSong);
        pauseBtn.addEventListener('click', pauseSong);
        nextBtn.addEventListener('click', nextSong);
        prevBtn.addEventListener('click', prevSong);

        document.getElementById('progressContainer').addEventListener('click', (e) => {
            const progressContainer = e.target;
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = sound.duration();

            sound.seek((clickX / width) * duration);
        });

        function showPhoto(index) {
            const photoGallery = document.getElementById('photoGallery');
            photoGallery.innerHTML = '';
            const photo = document.createElement('img');
            photo.src = photos[index];
            photo.classList.add('photo');
            photoGallery.appendChild(photo);

            setTimeout(() => {
                photo.classList.add('active');
            }, 10);
        }

        function nextPhoto() {
            currentPhotoIndex = (currentPhotoIndex + 1) % photos.length;
            showPhoto(currentPhotoIndex);
        }

        setInterval(nextPhoto, 5000);
        showPhoto(currentPhotoIndex);

        const letterButtonsContainer = document.getElementById('letterButtons');
        letters.forEach((letter, index) => {
            const button = document.createElement('button');
            button.classList.add('letter-btn');
            button.textContent = `Letter ${index + 1}`;
            button.addEventListener('click', () => {
                document.getElementById('letterText').textContent = letter;
                document.getElementById('letterModal').style.display = 'block';
            });
            letterButtonsContainer.appendChild(button);
        });

        document.querySelector('.modal .close').addEventListener('click', () => {
            document.getElementById('letterModal').style.display = 'none';
        });

        updatePlayerInfo();
    </script>
</body>
</html>
